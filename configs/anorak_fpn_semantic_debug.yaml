trainer:
  precision: "16-mixed" # or "bf16-mixed" for uni2 or 16-mixed for h-optimus
  max_steps: 40000
  val_check_interval: ~
  check_val_every_n_epoch: 10
  logger: ~
    # class_path: lightning.pytorch.loggers.wandb.WandbLogger
    # init_args:
    #   project: debug_anorak
    #   group: debug
    #   job_type: debug
    #   tags: ["debug", "local"]
    #   save_dir: ./wandb_debug
    #   log_model: false # avoid artifact uploads in debug
  # callbacks:
  #   - class_path: lightning.pytorch.callbacks.ModelSummary
  #     init_args:
  #       max_depth: 2
    # - class_path: training.callbacks.debug.DebugAugCallback
    #   init_args:
    #     num_batches: 2 # how many train batches to visualize per epoch
    #     freq_epochs: 50 # every N epochs (set to 5 if itâ€™s too chatty)

model:
  class_path: training.fpn_semantic.FPNSemantic
  init_args:
    freeze_encoder: False
    deep_supervision: False
    network:
      class_path: models.histoseg.segmentation_models.HistoViTSeg
      # class_path: models.histoseg.segmentation_models.MocoResNetSeg
      init_args:
        encoder_id: "h0-mini"
        # checkpoint_path: "/mnt/nas7/data/Personal/Darya/Checkpoints/superpixel_cluster_clean/no_cluster_4MLP_queue32768_resnet101_beta0.005_epochs100_moco_superpixel/best_model_epoch94.pth"
        # base_encoder: "resnet101"
    tiler:
      class_path: training.tiler.GridPadTiler
      init_args:
        tile: 672
        stride: 384
        weighted_blend: true # or true
        pad_mode: "replicate" # optional; nice for images
        pad_value: 0.0
data:
  class_path: datasets.anorak.ANORAK
  init_args:
    overwrite_root: /home/valentin/workspaces/benchmark-vfm-ss/data/ANORAK_10x
    img_size: [672, 672]
    prefetch_factor: 4
    num_workers: 0
    fold: 0
    transforms:
      # class_path: datasets.transforms.CustomTransforms
      # init_args:
      #   img_size: [448, 448]
      #   scale_range: [0.8, 1.2]
      #   # disable_color_jitter: true
